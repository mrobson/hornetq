<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
   <modelVersion>4.0.0</modelVersion>
   <parent>
      <groupId>org.hornetq.tests</groupId>
      <artifactId>hornetq-tests-pom</artifactId>
      <version>2.3.25.x.Final</version>
   </parent>

   <artifactId>jdk8-tests</artifactId>
   <packaging>jar</packaging>
   <name>HornetQ JDK8+ Tests</name>

   <properties>
      <hornetq.basedir>${project.basedir}/../..</hornetq.basedir>
      <jetty.version>9.4.0.M1</jetty.version>
   </properties>

   <dependencies>
       <dependency>
           <groupId>org.hornetq.tests</groupId>
           <artifactId>integration-tests</artifactId>
           <version>${project.version}</version>
           <scope>test</scope>
           <type>test-jar</type>
       </dependency>
       <dependency>
           <groupId>org.hornetq</groupId>
           <artifactId>hornetq-server</artifactId>
           <version>${project.version}</version>
           <scope>test</scope>
           <type>test-jar</type>
       </dependency>
       <dependency>
           <groupId>org.hornetq</groupId>
           <artifactId>hornetq-core-client</artifactId>
           <version>${project.version}</version>
           <scope>test</scope>
           <type>test-jar</type>
       </dependency>
       <dependency>
           <groupId>org.hornetq.tests</groupId>
           <artifactId>unit-tests</artifactId>
           <version>${project.version}</version>
           <scope>test</scope>
           <type>test-jar</type>
       </dependency>

       <!-- rest test -->
       <dependency>
           <groupId>org.eclipse.jetty.aggregate</groupId>
           <artifactId>jetty-all</artifactId>
           <version>${jetty.version}</version>
           <type>jar</type>
           <classifier>uber</classifier>
       </dependency>
       <dependency>
           <groupId>org.jboss.resteasy</groupId>
           <artifactId>resteasy-jaxrs</artifactId>
       </dependency>
       <dependency>
           <groupId>org.hornetq.rest</groupId>
           <artifactId>hornetq-rest</artifactId>
           <version>${project.version}</version>
           <scope>compile</scope>
       </dependency>
   </dependencies>

   <build>
      <testResources>
         <testResource>
            <directory>src/test/resources</directory>
            <filtering>true</filtering>
             <excludes>
                 <exclude>**/rest/*.xml</exclude>
             </excludes>
         </testResource>
      </testResources>
      <plugins>
          <plugin>
              <groupId>org.apache.maven.plugins</groupId>
              <artifactId>maven-assembly-plugin</artifactId>
              <executions>
                  <execution>
                      <phase>process-test-classes</phase>
                      <id>bwlist-rest-test-war</id>
                      <goals>
                          <goal>single</goal>
                      </goals>
                      <configuration>
                          <descriptor>src/test/resources/rest/bwlist-rest-test-asm.xml</descriptor>
                          <finalName>rest-test-bwlist</finalName>
                          <appendAssemblyId>false</appendAssemblyId>
                          <outputDirectory>target/test-classes/rest/</outputDirectory>
                      </configuration>
                  </execution>
                  <execution>
                      <phase>process-test-classes</phase>
                      <id>rest-test-war</id>
                      <goals>
                          <goal>single</goal>
                      </goals>
                      <configuration>
                          <descriptor>src/test/resources/rest/rest-test-asm.xml</descriptor>
                          <finalName>rest-test</finalName>
                          <appendAssemblyId>false</appendAssemblyId>
                          <outputDirectory>target/test-classes/rest/</outputDirectory>
                      </configuration>
                  </execution>
              </executions>
          </plugin>
         <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-jar-plugin</artifactId>
            <executions>
               <execution>
                  <phase>test</phase>
                  <goals>
                     <goal>test-jar</goal>
                  </goals>
               </execution>
            </executions>
         </plugin>
         <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-surefire-plugin</artifactId>
            <configuration>
               <skipTests>${skipJDK8Tests}</skipTests>
            </configuration>
         </plugin>
      </plugins>
   </build>

</project>
